
Upgrade instructions to ikaaro 0.20.0
***************************************************************************

For sys admins
==============

Add a log file to "icms-update.py"
Move the contact email to the configuration file.
Allow to use an smtp that required identification
changes to the icms-start.py signature
new option DEBUG
new folder "log"

1. Update database
------------------

As usual instances must be updated:

  $ icms-update.py xxx           (1)
  $ icms-update-catalog.py xxx   (2)

However, given the nature of the changes, sometimes the first step (1)
could fail with an error message.  If this happens the problem must be
resolved in the origin database, and then the procedure can be re-started.



For developers
==============



1. Imports
----------

Most important, "itools.cms" has been changed to "ikaaro":

  from itools.cms import XXX                     # Before
  from ikaaro import XXX                         # Now

The module "future" has become a package:

  from itools.cms.future import Dressable        # Before
  from ikaaro.future.dressable import Dressable  # Now

  from itools.cms.future import OrderAware       # Before
  from ikaaro.future.order import OrderAware     # Now

Other renames include:

  from itools.cms.html import XHTMLFile          # Before
  from ikaaro.html import WebPage                # Now


2. 
------------------




UNCLASSIFIED
============

Remove obsolete code (ListOfUsers)
_get_virtual_handler => _get_object

"get_real_handler" => "get_real_object"
"get_physical_path" => "get_canonical_path"

Code reorganization: wiki, tracker, future, forum

"search_handlers" => "search_objects"

It is not necessary to inherit from ikaaro.Root class to define the catalog fields now.

Remove "get_pathtoroot"

send_email prototype
"new_instance*" are now staticmethod, drop the last traces of "im_func"
Remove the "owner" metadata.






New metadata architecture
Decentralize "icms-update.py"


Proof-of-concept interface to check broken links.
Add a log file to "icms-update.py"
Now files "remember" the original filename.
Unify HTML and XHTML web pages
Move the contact email to the configuration file.
Remove "icms-make-package.py"

Replace "change_language" by a more efficient (no redirections), robust (no
referrer) and google friendly way to set the language.

Fix upload of multilingual files.  Add optional "title" to the upload form.
extend the wiki/tracker action box to all containers
Allow to use an smtp that required identification
Remove plain text files from the add form.
changes to the icms-start.py signature
new option DEBUG
new folder "log"
"new_instance*" are now staticmethod, drop the last traces of "im_func"
Allow to send html emails with send_email method

